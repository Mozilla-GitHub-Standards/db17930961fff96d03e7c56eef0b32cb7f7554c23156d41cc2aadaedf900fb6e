<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <title>brick-action-menu</title>

    <!-- Importing Polyfill -->
    <script src="bower_components/platform/platform.js"></script>

    <!-- Importing Custom Elemenent -->
    <link rel="import" href="src/element.html">

    <style type="text/css">
      textarea#log {
        width: 75%;
        height: 25ex;
      }
    </style>
  </head>
  <body>

    <h1>brick-action-menu demo</h1>

    <p>This is a demo of the brick-action-menu web component!</p>

    <h2>Menus</h2>

    <ul id="show-examples">
      <li><button id="ex1" data-show="menu-ex1">Show Example #1: Simple, without cancel</button></li>
      <li><button id="ex2" data-show="menu-ex2">Show Example #2: Header &amp; cancel</button></li>
      <li><button id="ex3" data-show="menu-ex3">Show Example #3: Full features</button></li>
    </ul>

    <h2>Results</h2>
    <textarea id="log"></textarea>

    <brick-action-menu id="menu-ex1">
      <menu>
        <button>Action 1</button>
        <button>Action 2</button>
        <button>Action 3</button>
      </menu>
    </brick-action-menu>
    
    <brick-action-menu id="menu-ex2">
      <header>
        <h1>Example Title</h1>
      </header>

      <menu>
        <button>Action 1</button>
        <button disabled>Action 2 (disabled)</button>
        <button>Action 3</button>

        <button class="cancel">Cancel</button>
      </menu>
    </brick-action-menu>

    <brick-action-menu id="menu-ex3">
      <header>
        <button><span class="icon icon-close">close</span></button>
        <menu type="toolbar">
          <button>Done</button>
        </menu>
        <h1>Example Title</h1>
      </header>

      <section>
        <p>Curabitur condimentum diam mollis lacus hendrerit congue. Phasellus
        porttitor orci elit, ac consequat est mollis ut. Ut consequat ipsum a
        ullamcorper aliquam.</p>
      </section>

      <menu>
        <button>Action 1</button>
        <button disabled>Action 2 (disabled)</button>
        <button>Action 3</button>

        <button class="cancel">Cancel</button>
      </menu>
    </brick-action-menu>

    <script type="text/javascript">

      document.addEventListener('WebComponentsReady', function () { 

        // Wire up event listeners for all action menus
        var menus = document.querySelectorAll('brick-action-menu');
        for (var i = 0; i < menus.length; i++) {
          (function (menu) {
           
            // NOTE: Menus emit a 'pick' event when an item is clicked.
            menu.addEventListener('pick', function (e) {
              _log("Event 'pick': " + menu.id + ", " + e.target.innerHTML); 
            });

          })(menus[i]);
        }

        // Wire up event delegation for example buttons
        var buttonList = document.getElementById('show-examples');
        buttonList.addEventListener('click', function (e) {
          var id = e.target.getAttribute('data-show');
          if (id) {
            var menu = document.getElementById(id);

            // NOTE: show() reveals the menu, accepts an optional callback
            menu.show(function (button) {
              _log("Callback: " + id + ", " + button.innerHTML); 
            });

          }
        });

      });

      // Quick-and-dirty logging for when devtools are closed
      var logEL = document.getElementById('log');
      logEL.value = '';
      function _log (msg) {
        console.log(msg);
        logEL.value += Date.now() + ' - ' + msg + "\n";
        logEL.scrollTop = logEL.scrollHeight;
      }

    </script>

  </body>
</html>
